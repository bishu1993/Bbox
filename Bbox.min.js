
(function(){this.Bbox=function(){this.closeButton=null;this.modal=null;this.overlay=null;this.transitionEnd=a();var e={title:"",autoOpen:false,className:"fade-and-drop",sticky:false,closeButton:true,closeButtonIcon:"",hideOnOverlayClick:false,content:"",maxWidth:600,minWidth:280,overlay:true,overlayColor:"",overlayOpacity:"",bgColor:"#fff",scroll:false,url:"",urlParms:""};if(arguments[0]&&typeof arguments[0]==="object"){this.options=c(e,arguments[0])}if(this.options.autoOpen===true){this.open()}};Bbox.prototype.close=function(){var e=this;this.modal.className=this.modal.className.replace("Bbox-open","");this.overlay.className=this.overlay.className.replace("Bbox-open","");this.overlay.removeAttribute("style");this.modal.addEventListener(this.transitionEnd,function(){e.modal.parentNode.removeChild(e.modal)});this.overlay.addEventListener(this.transitionEnd,function(){if(e.overlay.parentNode){e.overlay.parentNode.removeChild(e.overlay)}})};Bbox.prototype.open=function(){d.call(this);b.call(this);window.getComputedStyle(this.modal).height;var e=parseInt(window.innerHeight);var g=parseInt(window.getComputedStyle(this.modal).height);var f=(e-g)/2+"px";e>g?this.modal.style.top=f:"20px";this.modal.className=this.modal.className+(this.modal.offsetHeight>window.innerHeight?" Bbox-open Bbox-anchored":" Bbox-open");this.overlay.className=this.overlay.className+" Bbox-open"};function d(){var h,l,g;if(this.options.url){var f=new XMLHttpRequest();var e=this.options.url;if(this.options.urlParms){var k=this.options.urlParms}f.open("POST",e,true);f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.onreadystatechange=function(){if(f.readyState==4&&f.status==200){h=f.responseText}};if(this.options.urlParms){f.send(k)}}else{if(typeof this.options.content==="string"){h=this.options.content}else{h=this.options.content.innerHTML}}g=document.createDocumentFragment();this.modal=document.createElement("div");this.modal.className="Bbox-modal "+this.options.className;this.modal.className="Bbox-modal "+this.options.className;if(this.options.size){if(this.options.size==="big"){this.modal.style.minWidth="300px";this.modal.style.maxWidth="85%"}if(this.options.size==="medium"){this.modal.style.minWidth="300px";this.modal.style.maxWidth="60%"}if(this.options.size==="small"){this.modal.style.minWidth="300px";this.modal.style.maxWidth="40%"}}else{this.modal.style.minWidth=this.options.minWidth+"px";this.modal.style.maxWidth=this.options.maxWidth+"px"}if(this.options.sticky){this.modal.style.position="fixed";this.modal.style.minHeight="200px";this.modal.style.maxHeight="440px";this.modal.style.overflow="auto"}if(this.options.bgColor){this.modal.style.backgroundColor=this.options.bgColor}if(this.options.scroll){this.modal.style.overflowY="auto"}if(this.options.title){this.title=document.createElement("div");this.title.style.width="100%";this.title.style.height="40px";this.title.innerHTML='<h2 class="title">'+this.options.title+"</h2>";this.modal.appendChild(this.title)}if(this.options.closeButton===true){if(this.options.closeButtonIcon){this.closeButton=document.createElement("div");this.closeButton.setAttribute("class","Bbox-close close-button");this.closeButton.innerHTML='<img src="'+this.options.closeButtonIcon+'" alt="close" width="32px" height="32px"/>';this.modal.appendChild(this.closeButton)}else{this.closeButton=document.createElementNS("http://www.w3.org/2000/svg","svg");this.closeButton.setAttribute("height","32px");this.closeButton.setAttribute("width","32px");this.closeButton.setAttribute("class","Bbox-close close-button");var i=this.closeButton.namespaceURI;var j=document.createElementNS(i,"path");j.setAttributeNS(null,"d","m.45,25.1c-0.2,0.3-0.3,0.7-0.3,1 0,0.4 0.1,0.8 0.3,1.1 0.4,0.6 1,0.9 1.7,0.9 0.5,0 1-0.2 1.4-0.6 1.5-1.5 2.1-3.6 3.5-5l4.3-4.3c1.5-1.5 3.9-1.5 5.4,0l.9,.9c2.3,2.3 3,5.9 5.3,8.1 0.6,0.6 1.4,0.9 2.1,0.9 0.9,0 1.9-0.4 2.5-1.3 0.3-0.5 0.5-1.1 0.5-1.7 0-0.6-0.2-1.2-0.5-1.7-1.9-2.9-6.1-3.4-8.6-5.9l-.8-.8c-1.5-1.5-1.5-3.9 0-5.4l3.5-3.5c1.8-1.8 4.8-2.5 6.1-4.7 0.2-0.3 0.3-0.7 0.3-1 0-0.4-0.1-0.8-0.3-1.1-0.4-0.6-1-0.9-1.7-0.9-0.5,0-1,0.2-1.4,0.6-1.8,1.8-2.8,4.2-4.6,5.9l-3.3,3.3c-1.5,1.5-3.9,1.5-5.4,0l-3.8-3.8c-1.7-1.7-2.4-4.5-4.5-5.8-0.6-0.4-1.5-0.4-2.1,0s-0.9,1-0.9,1.7c0,0.5 0.2,1 0.6,1.4 1.8,1.8 4.2,2.8 6,4.6l3.3,3.3c1.5,1.5 1.5,3.9 0,5.4l-4.7,4.7c-1.4,1.5-3.8,2-4.8,3.7z");j.setAttributeNS(null,"fill","#42DC9A");this.closeButton.appendChild(j);this.modal.appendChild(this.closeButton)}}if(this.options.overlay===true){this.overlay=document.createElement("div");this.overlay.className="Bbox-overlay "+this.options.className;if(this.options.overlayColor){this.overlay.style.backgroundColor=this.options.overlayColor}if(this.options.overlayOpacity){this.overlay.style.opacity=this.options.overlayOpacity}g.appendChild(this.overlay)}l=document.createElement("div");l.className="Bbox-content";l.innerHTML=h;this.modal.appendChild(l);g.appendChild(this.modal);document.body.appendChild(g)}function b(){if(this.closeButton){this.closeButton.addEventListener("click",this.close.bind(this))}if(this.overlay){if(this.options.hideOnOverlayClick){this.overlay.addEventListener("click",this.close.bind(this))}}}function c(g,e){var f;for(f in e){if(e.hasOwnProperty(f)){g[f]=e[f]}}return g}function a(){var e=document.createElement("div");if(e.style.WebkitTransition){return"webkitTransitionEnd"}if(e.style.OTransition){return"oTransitionEnd"}if(e.style.MozTransition){return"mozTransitionEnd"}return"transitionend"}}());